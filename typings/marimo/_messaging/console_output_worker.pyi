"""
This type stub file was generated by pyright.
"""

from dataclasses import dataclass
from typing import Literal, TYPE_CHECKING
from marimo._ast.cell import CellId_t
from marimo._messaging.cell_output import CellChannel
from marimo._messaging.mimetypes import KnownMimeType
from collections import deque
from threading import Condition
from marimo._messaging.types import Stream

if TYPE_CHECKING:
    ...
StreamT = Literal[CellChannel.STDERR, CellChannel.STDOUT, CellChannel.STDIN]
TIMEOUT_S = ...
@dataclass
class ConsoleMsg:
    stream: StreamT
    cell_id: CellId_t
    data: str
    mimetype: KnownMimeType
    ...


def buffered_writer(msg_queue: deque[ConsoleMsg], stream: Stream, cv: Condition) -> None:
    """
    Writes standard out and standard error to frontend in batches

    Buffers console messages, writing them out in batches. A condition
    variable is used to synchronize access to `msg_queue`, and to obtain
    notifications when messages have been added. (A deque + condition variable
    was noticeably faster than the builtin queue.Queue in testing.)
    """
    ...
