"""
This type stub file was generated by pyright.
"""

import asyncio
import sys
from dataclasses import dataclass
from typing import Any, Callable, Literal, cast
from marimo._cli.print import echo
from marimo._config.manager import get_default_config_manager
from marimo._messaging.cell_output import CellChannel
from marimo._messaging.errors import Error
from marimo._messaging.ops import MessageOperation
from marimo._messaging.types import KernelMessage
from marimo._output.hypertext import patch_html_for_non_interactive_output
from marimo._runtime.requests import AppMetadata, SerializedCLIArgs
from marimo._server.export.exporter import Exporter
from marimo._server.file_manager import AppFileManager
from marimo._server.file_router import AppFileRouter
from marimo._server.model import ConnectionState, SessionConsumer, SessionMode
from marimo._server.models.export import ExportAsHTMLRequest
from marimo._server.models.models import InstantiateRequest
from marimo._server.session.session_view import SessionView
from marimo._utils.marimo_path import MarimoPath
from marimo._utils.parse_dataclass import parse_raw

@dataclass
class ExportResult:
    contents: str
    download_filename: str
    did_error: bool
    ...


def export_as_script(path: MarimoPath) -> ExportResult:
    ...

def export_as_md(path: MarimoPath) -> ExportResult:
    ...

def export_as_ipynb(path: MarimoPath, sort_mode: Literal["top-down", "topological"]) -> ExportResult:
    ...

async def run_app_then_export_as_ipynb(path: MarimoPath, sort_mode: Literal["top-down", "topological"], cli_args: SerializedCLIArgs) -> ExportResult:
    ...

async def run_app_then_export_as_html(path: MarimoPath, include_code: bool, cli_args: SerializedCLIArgs) -> ExportResult:
    ...

async def run_app_then_export_as_reactive_html(path: MarimoPath, include_code: bool) -> ExportResult:
    ...

async def run_app_until_completion(file_manager: AppFileManager, cli_args: SerializedCLIArgs) -> tuple[SessionView, bool]:
    class DefaultSessionConsumer(SessionConsumer):
        ...
